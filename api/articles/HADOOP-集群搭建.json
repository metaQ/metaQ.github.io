{"title":"hadoop-集群搭建","uid":"4e4f31add73d915abf83a9e83faf2202","slug":"HADOOP-集群搭建","date":"2022-11-07T16:00:00.000Z","updated":"2022-12-26T16:22:04.745Z","comments":true,"path":"api/articles/HADOOP-集群搭建.json","keywords":null,"cover":[],"content":"<h2 id=\"设置固定-IP\"><a href=\"#设置固定-IP\" class=\"headerlink\" title=\"设置固定 IP\"></a>设置固定 IP</h2><p>NAT 模式接入网络，要检查 windows 中网卡是否开启，并在属性中更改 ipv4 的配置信息</p>\n<br>\n在虚拟机中的虚拟网络编辑器中,更改子网为所需要的 128 网段\n<br>\n\n<p>在 master 中修改网卡配置文件：</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">vim &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33</code></pre>\n\n<p>修改 bootproto&#x3D;static，onboot&#x3D;yes，并添加 IP 地址、网关、子网掩码和 DNS 信息。<br>重启网卡服务：</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">service network restart\n&#x2F;&#x2F;systemctl restart network</code></pre>\n\n<h2 id=\"修改主机名\"><a href=\"#修改主机名\" class=\"headerlink\" title=\"修改主机名\"></a>修改主机名</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">hostnamectl set-hostname master</code></pre>\n\n<h2 id=\"xshell-xftp-远程连接虚拟机\"><a href=\"#xshell-xftp-远程连接虚拟机\" class=\"headerlink\" title=\"xshell xftp 远程连接虚拟机\"></a>xshell xftp 远程连接虚拟机</h2><p><a href=\"https://www.xshell.com/zh/free-for-home-school/\">NETSARANG 免费的许可证</a></p>\n<p>若出现远程连接慢，执行以下操作：</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">vim &#x2F;etc&#x2F;ssh&#x2F;sshd_config\n\n\t#UseDNS yes ---&gt;默认为注释行\n\n\tUseDNS no ---&gt;把注释打开，改为no，然后重启ssh服务即可\nsystemctl restart sshd</code></pre>\n\n\n\n<h2 id=\"配置本地-yum-源\"><a href=\"#配置本地-yum-源\" class=\"headerlink\" title=\"配置本地 yum 源\"></a>配置本地 yum 源</h2><p>进入&#x2F;etc&#x2F;yum.repos.d</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">cd &#x2F;etc&#x2F;yum.repos.d</code></pre>\n\n<p><br>禁用除了本地 yum 源 ：CentOS-Media.repo 以外的其他源，加文件名后缀.bak<br><br>修改 CentOS-Media.repo 文件内容。将 baseurl 的值修改为“file:&#x2F;&#x2F;&#x2F;media&#x2F;”，将 gpgcheck 的值改为“0”，将 enabled 的值改为“1”。<br><br><br>确保开启”已连接”<br><br><br>使用</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">mount &#x2F;dev&#x2F;sr0 &#x2F;media</code></pre>\n\n<p>命令挂载本地 YUM 源。提示写保护则挂载成功。<br><br><br>清理 yum 缓存</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yum clean all</code></pre>\n\n<h2 id=\"使用-yum-安装常用软件\"><a href=\"#使用-yum-安装常用软件\" class=\"headerlink\" title=\"使用 yum 安装常用软件\"></a>使用 yum 安装常用软件</h2><p><code>yum install -y vim zip openssh-server openssh-clients</code></p>\n<h2 id=\"安装-Java\"><a href=\"#安装-Java\" class=\"headerlink\" title=\"安装 Java\"></a>安装 Java</h2><p>下载 jdk 的 npm 包(以 jdk-8u281-linux-x64.rpm 为例)，使用 xfpt 传输到&#x2F;opt 目录下</p>\n<p><br>切换到&#x2F;opt，使用命令安装 jdk</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">rpm -ivh jdk-8u281-linux-x64.rpm</code></pre>\n\n<p><br>验证是否安装成功</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">java -version</code></pre>\n\n<h2 id=\"安装-Hadoop-修改集群相关配置文件\"><a href=\"#安装-Hadoop-修改集群相关配置文件\" class=\"headerlink\" title=\"安装 Hadoop 修改集群相关配置文件\"></a>安装 Hadoop 修改集群相关配置文件</h2><p>将 Hadoop 安装包 hadoop-3.1.4.tar.gz 上传至虚拟机 master 的&#x2F;opt 目录下，进入&#x2F;opt使用tar解压至&#x2F;usr&#x2F;local：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">tar -zxf hadoop-3.1.4.tar.gz -C &#x2F;usr&#x2F;local</code></pre>\n\n<p><br>进入<code>/usr/local/hadoop-3.1.4/etc/hadoop </code>目录：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">cd &#x2F;usr&#x2F;local&#x2F;hadoop-3.1.4&#x2F;etc&#x2F;hadoop</code></pre>\n\n<p>并修改 core-site.xml、hadoop-env.sh、yarn-env.sh、mapred-site.xml、yarn-site.xml、workers、hdfs-site.xml 共 7 个配置文件的内容。</p>\n<p><br>core-site.xml</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\">&lt;configuration&gt;\n    &lt;property&gt;\n    &lt;name&gt;fs.defaultFS&lt;&#x2F;name&gt;\n      &lt;value&gt;hdfs:&#x2F;&#x2F;master:8020&lt;&#x2F;value&gt;\n      &lt;&#x2F;property&gt;\n    &lt;property&gt;\n      &lt;name&gt;hadoop.tmp.dir&lt;&#x2F;name&gt;\n      &lt;value&gt;&#x2F;var&#x2F;log&#x2F;hadoop&#x2F;tmp&lt;&#x2F;value&gt;\n    &lt;&#x2F;property&gt;\n&lt;&#x2F;configuration&gt;</code></pre>\n\n<p>hadoop-env.sh</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">export JAVA_HOME&#x3D;&#x2F;usr&#x2F;java&#x2F;jdk1.8.0_281-amd64\n&#x2F;&#x2F;修改 JAVA_HOME 的值为 JDK 所在目录（注意版本，确保文件名正确&#x2F;usr&#x2F;java&#x2F;...）\n&#x2F;&#x2F;(文件内高亮查找:&#x2F;JAVA_HOME)</code></pre>\n\n<p>yarn-env.sh</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">export JAVA_HOME&#x3D;&#x2F;home&#x2F;y&#x2F;libexec&#x2F;jdk1.6.0&#x2F;\nexport JAVA_HOME&#x3D;&#x2F;usr&#x2F;java&#x2F;jdk1.8.0_281-amd64</code></pre>\n\n<p>mapred-site.xml</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\">&lt;configuration&gt;\n&lt;property&gt;\n    &lt;name&gt;mapreduce.framework.name&lt;&#x2F;name&gt;\n    &lt;value&gt;yarn&lt;&#x2F;value&gt;\n&lt;&#x2F;property&gt;\n&lt;!-- jobhistory properties --&gt;\n&lt;property&gt;\n    &lt;name&gt;mapreduce.jobhistory.address&lt;&#x2F;name&gt;\n    &lt;value&gt;master:10020&lt;&#x2F;value&gt;\n&lt;&#x2F;property&gt;\n&lt;property&gt;\n     &lt;name&gt;mapreduce.jobhistory.webapp.address&lt;&#x2F;name&gt;\n     &lt;value&gt;master:19888&lt;&#x2F;value&gt;\n&lt;&#x2F;property&gt;\n&lt;property&gt;\n  &lt;name&gt;yarn.app.mapreduce.am.env&lt;&#x2F;name&gt;\n  &lt;value&gt;HADOOP_MAPRED_HOME&#x3D;$&#123;HADOOP_HOME&#125;&lt;&#x2F;value&gt;\n&lt;&#x2F;property&gt;\n&lt;property&gt;\n  &lt;name&gt;mapreduce.map.env&lt;&#x2F;name&gt;\n  &lt;value&gt;HADOOP_MAPRED_HOME&#x3D;$&#123;HADOOP_HOME&#125;&lt;&#x2F;value&gt;\n&lt;&#x2F;property&gt;\n&lt;property&gt;\n  &lt;name&gt;mapreduce.reduce.env&lt;&#x2F;name&gt;\n  &lt;value&gt;HADOOP_MAPRED_HOME&#x3D;$&#123;HADOOP_HOME&#125;&lt;&#x2F;value&gt;\n&lt;&#x2F;property&gt;\n&lt;&#x2F;configuration&gt;</code></pre>\n\n<p>yarn-site.xml</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\">&lt;configuration&gt;\n&lt;!-- Site specific YARN configuration properties --&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.hostname&lt;&#x2F;name&gt;\n    &lt;value&gt;master&lt;&#x2F;value&gt;\n  &lt;&#x2F;property&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.address&lt;&#x2F;name&gt;\n    &lt;value&gt;$&#123;yarn.resourcemanager.hostname&#125;:8032&lt;&#x2F;value&gt;\n  &lt;&#x2F;property&gt;\n &lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.scheduler.address&lt;&#x2F;name&gt;\n    &lt;value&gt;$&#123;yarn.resourcemanager.hostname&#125;:8030&lt;&#x2F;value&gt;\n  &lt;&#x2F;property&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.webapp.address&lt;&#x2F;name&gt;\n    &lt;value&gt;$&#123;yarn.resourcemanager.hostname&#125;:8088&lt;&#x2F;value&gt;\n  &lt;&#x2F;property&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.webapp.https.address&lt;&#x2F;name&gt;\n    &lt;value&gt;$&#123;yarn.resourcemanager.hostname&#125;:8090&lt;&#x2F;value&gt;\n  &lt;&#x2F;property&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.resource-tracker.address&lt;&#x2F;name&gt;\n    &lt;value&gt;$&#123;yarn.resourcemanager.hostname&#125;:8031&lt;&#x2F;value&gt;\n  &lt;&#x2F;property&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.admin.address&lt;&#x2F;name&gt;\n    &lt;value&gt;$&#123;yarn.resourcemanager.hostname&#125;:8033&lt;&#x2F;value&gt;\n  &lt;&#x2F;property&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.nodemanager.local-dirs&lt;&#x2F;name&gt;\n    &lt;value&gt;&#x2F;data&#x2F;hadoop&#x2F;yarn&#x2F;local&lt;&#x2F;value&gt;\n  &lt;&#x2F;property&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.log-aggregation-enable&lt;&#x2F;name&gt;\n    &lt;value&gt;true&lt;&#x2F;value&gt;\n  &lt;&#x2F;property&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.nodemanager.remote-app-log-dir&lt;&#x2F;name&gt;\n    &lt;value&gt;&#x2F;data&#x2F;tmp&#x2F;logs&lt;&#x2F;value&gt;\n  &lt;&#x2F;property&gt;\n&lt;property&gt;\n &lt;name&gt;yarn.log.server.url&lt;&#x2F;name&gt;\n &lt;value&gt;http:&#x2F;&#x2F;master:19888&#x2F;jobhistory&#x2F;logs&#x2F;&lt;&#x2F;value&gt;\n &lt;description&gt;URL for job history server&lt;&#x2F;description&gt;\n&lt;&#x2F;property&gt;\n&lt;property&gt;\n   &lt;name&gt;yarn.nodemanager.vmem-check-enabled&lt;&#x2F;name&gt;\n    &lt;value&gt;false&lt;&#x2F;value&gt;\n  &lt;&#x2F;property&gt;\n &lt;property&gt;\n    &lt;name&gt;yarn.nodemanager.aux-services&lt;&#x2F;name&gt;\n    &lt;value&gt;mapreduce_shuffle&lt;&#x2F;value&gt;\n  &lt;&#x2F;property&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.nodemanager.aux-services.mapreduce.shuffle.class&lt;&#x2F;name&gt;\n      &lt;value&gt;org.apache.hadoop.mapred.ShuffleHandler&lt;&#x2F;value&gt;\n      &lt;&#x2F;property&gt;\n&lt;property&gt;\n        &lt;name&gt;yarn.nodemanager.resource.memory-mb&lt;&#x2F;name&gt;\n        &lt;value&gt;2048&lt;&#x2F;value&gt;\n &lt;&#x2F;property&gt;\n &lt;property&gt;\n        &lt;name&gt;yarn.scheduler.minimum-allocation-mb&lt;&#x2F;name&gt;\n        &lt;value&gt;512&lt;&#x2F;value&gt;\n &lt;&#x2F;property&gt;\n &lt;property&gt;\n        &lt;name&gt;yarn.scheduler.maximum-allocation-mb&lt;&#x2F;name&gt;\n        &lt;value&gt;4096&lt;&#x2F;value&gt;\n &lt;&#x2F;property&gt;\n &lt;property&gt;\n    &lt;name&gt;mapreduce.map.memory.mb&lt;&#x2F;name&gt;\n    &lt;value&gt;2048&lt;&#x2F;value&gt;\n &lt;&#x2F;property&gt;\n &lt;property&gt;\n    &lt;name&gt;mapreduce.reduce.memory.mb&lt;&#x2F;name&gt;\n    &lt;value&gt;2048&lt;&#x2F;value&gt;\n &lt;&#x2F;property&gt;\n &lt;property&gt;\n    &lt;name&gt;yarn.nodemanager.resource.cpu-vcores&lt;&#x2F;name&gt;\n    &lt;value&gt;1&lt;&#x2F;value&gt;\n &lt;&#x2F;property&gt;\n&lt;&#x2F;configuration&gt;</code></pre>\n\n<p>workers</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">&#x2F;&#x2F;删除 localhost，添加以下内容\nslave1\nslave2\nslave3</code></pre>\n\n<p>hdfs-site.xml</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\">&lt;configuration&gt;\n&lt;property&gt;\n    &lt;name&gt;dfs.namenode.name.dir&lt;&#x2F;name&gt;\n    &lt;value&gt;file:&#x2F;&#x2F;&#x2F;data&#x2F;hadoop&#x2F;hdfs&#x2F;name&lt;&#x2F;value&gt;\n&lt;&#x2F;property&gt;\n&lt;property&gt;\n    &lt;name&gt;dfs.datanode.data.dir&lt;&#x2F;name&gt;\n    &lt;value&gt;file:&#x2F;&#x2F;&#x2F;data&#x2F;hadoop&#x2F;hdfs&#x2F;data&lt;&#x2F;value&gt;\n&lt;&#x2F;property&gt;\n&lt;property&gt;\n     &lt;name&gt;dfs.namenode.secondary.http-address&lt;&#x2F;name&gt;\n     &lt;value&gt;master:50090&lt;&#x2F;value&gt;\n&lt;&#x2F;property&gt;\n&lt;property&gt;\n     &lt;name&gt;dfs.replication&lt;&#x2F;name&gt;\n     &lt;value&gt;3&lt;&#x2F;value&gt;\n&lt;&#x2F;property&gt;\n&lt;&#x2F;configuration&gt;</code></pre>\n\n<p><br>为了防止 Hadoop 集群启动失败，需要修改 Hadoop 集群启动和关闭服务的文件。启动和关闭服务的文件在&#x2F;usr&#x2F;local&#x2F;hadoop-3.1.4&#x2F;sbin&#x2F;目录下，需要修改的文件分别是 start-dfs.sh、stop-dfs.sh、start-yarn.sh 和 stop-yarn.sh。</p>\n<p>start-dfs.sh、stop-dfs.sh</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">HDFS_DATANODE_USER&#x3D;root\nHDFS_DATANODE_SECURE_USER&#x3D;hdfs\nHDFS_NAMENODE_USER&#x3D;root\nHDFS_SECONDARYNAMENODE_USER&#x3D;root</code></pre>\n\n<p>start-yarn.sh 和 stop-yarn.sh</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">YARN_RESOURCEMANAGER_USER&#x3D;root\nHADOOP_SECURE_DN_USER&#x3D;yarn\nYARN_NODEMANAGER_USER&#x3D;root</code></pre>\n\n<p><br>修改主机与 IP 地址映射 &#x2F;etc&#x2F;hosts</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">192.168.128.130 master master.centos.com\n192.168.128.131 slave1 salve1.centos.com\n192.168.128.132 slave2 slave2.centos.com\n192.168.128.133 slave3 slave3.centos.com</code></pre>\n\n<h2 id=\"克隆虚拟机\"><a href=\"#克隆虚拟机\" class=\"headerlink\" title=\"克隆虚拟机\"></a>克隆虚拟机</h2><p>创建 master 的完整克隆 slave1、slave2、slave3<br>分别修改网卡配置文件和主机名</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">vim &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33\n\nservice network restart&#x2F;&#x2F;重启网卡服务\n\nhostnamectl set-hostname slave1</code></pre>\n\n<p><br>验证是否配置成功，在 master 上 ping 一下各个节点</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">ping slave1\nping slave2\nping slave3</code></pre>\n\n<h2 id=\"配置-ssh-免密登录\"><a href=\"#配置-ssh-免密登录\" class=\"headerlink\" title=\"配置 ssh 免密登录\"></a>配置 ssh 免密登录</h2><p>master 上创建 ssh 密钥，三次 enter 键</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">ssh-keygen -t rsa</code></pre>\n\n<p><br>使用 ssh-copy-id 命令将公钥复制至远程机器中。按提示输入 yes 和密码</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">ssh-copy-id -i &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub master\nssh-copy-id -i &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub slave1\nssh-copy-id -i &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub slave2\nssh-copy-id -i &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub slave3</code></pre>\n\n<p><br>验证 SSH 是否能够无密钥登录。在 master 主节点下分别输入“ssh slave1”“ssh slave2”“ssh slave3”</p>\n<h2 id=\"配置时间同步服务\"><a href=\"#配置时间同步服务\" class=\"headerlink\" title=\"配置时间同步服务\"></a>配置时间同步服务</h2><p>检查 master 和各节点虚拟机是否连接</p>\n<p><br>在 master 和各节点重新挂在本地 yum 源</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">mount &#x2F;dev&#x2F;sr0 &#x2F;media</code></pre>\n\n<p><br>安装 ntp 服务</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yum install -y ntp</code></pre>\n\n<p><br>修改 master 的&#x2F;etc&#x2F;ntp.conf 文件，注释掉以 server 开头的行，添加：</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap\nserver 127.127.1.0\nfudge 127.127.1.0 stratum 10</code></pre>\n\n<p><br>修改 slave1、slave2、slave3 的&#x2F;etc&#x2F;ntp.conf 文件，注释掉 server 开头的行，并添加:<br>server master</p>\n<p><br>关闭 master 和 slave1、slave2、slave3 防火墙</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">systemctl stop firewalld\nsystemctl disable firewalld\nsystemctl status firewalld &#x2F;&#x2F;状态为 dead</code></pre>\n\n<p><br>在 master 启动 ntp</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">systemctl start ntpd\nsystemctl enable ntpd\nsystemctl status ntpd&#x2F;&#x2F;查看状态为 active 说明成功</code></pre>\n\n<p><br>slave1、slave2、slave3 同步时间</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">ntpdate master</code></pre>\n\n<p><br>slave1、slave2、slave3 启动 ntp</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">systemctl start ntpd\nsystemctl enable ntpd\nsystemctl status ntpd&#x2F;&#x2F;查看状态为 active 说明成功</code></pre>\n\n<h2 id=\"配置环境变量和格式化-NameNode\"><a href=\"#配置环境变量和格式化-NameNode\" class=\"headerlink\" title=\"配置环境变量和格式化 NameNode\"></a>配置环境变量和格式化 NameNode</h2><p>在 master 和 slave1、slave2、slave3 修改&#x2F;etc&#x2F;profile 文件，注意文件版本名。使用 <code>source /etc/profile </code>生效</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">export HADOOP_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;hadoop-3.1.4\nexport PATH&#x3D;$HADOOP_HOME&#x2F;bin:$PATH:$JAVA_HOME&#x2F;bin</code></pre>\n\n<p><br>在 master 和 slave1、slave2、slave3 输入 <code>hdfs namenode -format </code>格式化</p>\n<img src=\"/post/HADOOP-%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/1.png\">\n\n<h2 id=\"启动和关闭集群\"><a href=\"#启动和关闭集群\" class=\"headerlink\" title=\"启动和关闭集群\"></a>启动和关闭集群</h2><p>启动</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">cd $HADOOP\nsbin&#x2F;start-dfs.sh\nsbin&#x2F;start-yarn.sh\nsbin&#x2F;mr-jobhistory-daemon.sh start historyserver</code></pre>\n\n<img src=\"/post/HADOOP-%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/2.png\">\n\n<p><br>关闭</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">cd $HADOOP\nsbin&#x2F;stop-dfs.sh\nsbin&#x2F;stop-yarn.sh\nsbin&#x2F;mr-jobhistory-daemon.sh stop historyserver</code></pre>\n\n<h2 id=\"监控集群\"><a href=\"#监控集群\" class=\"headerlink\" title=\"监控集群\"></a>监控集群</h2><p>修改 windows 中的 C:\\Windows\\System32\\drivers\\etc\\hosts 文件(需要在属性中开启 user 的读写权限)</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">192.168.128.130 master master.centos.com\n192.168.128.131 slave1 salve1.centos.com\n192.168.128.132 slave2 slave2.centos.com\n192.168.128.133 slave3 slave3.centos.com</code></pre>\n\n<p><br>集群监控</p>\n<p><a href=\"http://master:9870/\">http://master:9870</a> &#x2F;&#x2F;hdfs 监控<br><a href=\"http://master:8088/\">http://master:8088</a> &#x2F;&#x2F;yarn 监控<br><a href=\"http://master:19888/\">http://master:19888</a> &#x2F;&#x2F;jobhistory 日志监控</p>\n","text":"设置固定 IPNAT 模式接入网络，要检查 windows 中网卡是否开启，并在属性中更改 ipv4 的配置信息 在虚拟机中的虚拟网络编辑器中,更改子网为所需要的 128 网段 在 master 中修改网卡配置文件： vim &#x2F;etc&#x2F;sysconfig&#x...","link":"","photos":[],"count_time":{"symbolsCount":"11k","symbolsTime":"10 mins."},"categories":[{"name":"note","slug":"note","count":4,"path":"api/categories/note.json"}],"tags":[{"name":"hadoop","slug":"hadoop","count":1,"path":"api/tags/hadoop.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E5%9B%BA%E5%AE%9A-IP\"><span class=\"toc-text\">设置固定 IP</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E4%B8%BB%E6%9C%BA%E5%90%8D\"><span class=\"toc-text\">修改主机名</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#xshell-xftp-%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA\"><span class=\"toc-text\">xshell xftp 远程连接虚拟机</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E6%9C%AC%E5%9C%B0-yum-%E6%BA%90\"><span class=\"toc-text\">配置本地 yum 源</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8-yum-%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6\"><span class=\"toc-text\">使用 yum 安装常用软件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85-Java\"><span class=\"toc-text\">安装 Java</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85-Hadoop-%E4%BF%AE%E6%94%B9%E9%9B%86%E7%BE%A4%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">安装 Hadoop 修改集群相关配置文件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%8B%E9%9A%86%E8%99%9A%E6%8B%9F%E6%9C%BA\"><span class=\"toc-text\">克隆虚拟机</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE-ssh-%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95\"><span class=\"toc-text\">配置 ssh 免密登录</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5%E6%9C%8D%E5%8A%A1\"><span class=\"toc-text\">配置时间同步服务</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%92%8C%E6%A0%BC%E5%BC%8F%E5%8C%96-NameNode\"><span class=\"toc-text\">配置环境变量和格式化 NameNode</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD%E9%9B%86%E7%BE%A4\"><span class=\"toc-text\">启动和关闭集群</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%9B%91%E6%8E%A7%E9%9B%86%E7%BE%A4\"><span class=\"toc-text\">监控集群</span></a></li></ol>","author":{"name":"Erraria","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"轮播图的两种实现方式:切换与平移","uid":"9586898e5a198e00a7873bf32843aa83","slug":"轮播图的两种实现方式-切换与平移","date":"2022-12-08T16:00:00.000Z","updated":"2022-12-26T04:24:30.817Z","comments":true,"path":"api/articles/轮播图的两种实现方式-切换与平移.json","keywords":null,"cover":null,"text":"","link":"","photos":[],"count_time":{"symbolsCount":0,"symbolsTime":"1 mins."},"categories":[{"name":"JavaScript","slug":"JavaScript","count":1,"path":"api/categories/JavaScript.json"}],"tags":[{"name":"js","slug":"js","count":1,"path":"api/tags/js.json"}],"author":{"name":"Erraria","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"shell编程实践","uid":"0c98adb549c320eeb63bf21d0f37524f","slug":"shell","date":"2022-04-23T01:21:53.000Z","updated":"2022-12-26T04:21:49.844Z","comments":true,"path":"api/articles/shell.json","keywords":null,"cover":[],"text":"shell 编程实践使用 shell 编写杨辉三角 回顾排列组合从 5 个人中抽取 3 个人参加会议(3 个人不能是同一个人，即无重复) ① 有顺序 则有 5×4×3 中可能(抽第一个 5 种,第二个 4 种，第三个 3 中(从剩下三个人中选)) 即从 n 个人中抽取 r 个人，...","link":"","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[{"name":"Linux","slug":"Linux","count":1,"path":"api/categories/Linux.json"}],"tags":[{"name":"Linux","slug":"Linux","count":1,"path":"api/tags/Linux.json"},{"name":"shell","slug":"shell","count":1,"path":"api/tags/shell.json"},{"name":"脚本","slug":"脚本","count":1,"path":"api/tags/脚本.json"}],"author":{"name":"Erraria","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}